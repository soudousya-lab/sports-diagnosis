// è¨ºæ–­ãƒ­ã‚¸ãƒƒã‚¯

// å¹³å‡ãƒ‡ãƒ¼ã‚¿ï¼ˆå­¦å¹´ãƒ»æ€§åˆ¥åˆ¥ï¼‰
// doublejump: é€£ç¶šç«‹ã¡å¹…è·³ã³3å›ã®åˆè¨ˆè·é›¢(cm) - å®Ÿæ¸¬ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãèª¿æ•´
// ãƒˆãƒƒãƒ—ã®å­ãŒ10ç‚¹ã«ãªã‚‹ã‚ˆã†å¹³å‡å€¤ã‚’è¨­å®šï¼ˆä»–ã®å­ã‚‚2-3ç‚¹ä¸ŠãŒã‚‹ï¼‰
export const averageData: Record<string, Record<string, Record<string, number>>> = {
  'k5': {
    male: { grip: 7, jump: 110, dash: 4.5, doublejump: 320, squat: 28, sidestep: 26, throw: 6 },
    female: { grip: 6.5, jump: 102, dash: 4.7, doublejump: 300, squat: 26, sidestep: 24, throw: 4.5 }
  },
  '1': {
    male: { grip: 7.5, jump: 130, dash: 4.1, doublejump: 360, squat: 30, sidestep: 28, throw: 7 },
    female: { grip: 7, jump: 115, dash: 4.5, doublejump: 330, squat: 28, sidestep: 26, throw: 5 }
  },
  '2': {
    male: { grip: 10, jump: 140, dash: 3.85, doublejump: 400, squat: 32, sidestep: 34, throw: 10 },
    female: { grip: 9.5, jump: 125, dash: 4.1, doublejump: 370, squat: 30, sidestep: 31, throw: 7 }
  },
  '3': {
    male: { grip: 11, jump: 140, dash: 3.9, doublejump: 380, squat: 31, sidestep: 32, throw: 10 },
    female: { grip: 10.5, jump: 120, dash: 4.2, doublejump: 340, squat: 24, sidestep: 30, throw: 6 }
  },
  '4': {
    male: { grip: 15, jump: 145, dash: 3.7, doublejump: 420, squat: 30, sidestep: 38, throw: 15 },
    female: { grip: 14, jump: 135, dash: 3.9, doublejump: 380, squat: 28, sidestep: 35, throw: 10 }
  },
  '5': {
    male: { grip: 18, jump: 155, dash: 3.5, doublejump: 460, squat: 33, sidestep: 42, throw: 20 },
    female: { grip: 17, jump: 145, dash: 3.7, doublejump: 420, squat: 31, sidestep: 38, throw: 13 }
  },
  '6': {
    male: { grip: 21, jump: 165, dash: 3.3, doublejump: 500, squat: 36, sidestep: 46, throw: 25 },
    female: { grip: 19, jump: 152, dash: 3.5, doublejump: 460, squat: 33, sidestep: 42, throw: 16 }
  }
}

// æ¨™æº–åå·® - å®Ÿæ¸¬ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãèª¿æ•´
export const sd: Record<string, number> = {
  grip: 4,
  jump: 15,
  dash: 0.35,
  doublejump: 80,  // 3å›ç‰ˆï¼šå€‹äººå·®ãŒå¤§ãã„
  squat: 5,
  sidestep: 6,
  throw: 5
}

// ã‚«ãƒ†ã‚´ãƒªå
export const categories: Record<string, string> = {
  grip: 'ç­‹åŠ›',
  jump: 'ç¬ç™ºåŠ›',
  dash: 'ç§»å‹•èƒ½åŠ›',
  doublejump: 'ãƒãƒ©ãƒ³ã‚¹',
  squat: 'ç­‹æŒä¹…åŠ›',
  sidestep: 'æ•æ·æ€§',
  throw: 'æŠ•åŠ›'
}

// ã‚¹ãƒãƒ¼ãƒ„ãƒ‡ãƒ¼ã‚¿
export const allSports = [
  { name: 'ã‚µãƒƒã‚«ãƒ¼', required: ['dash', 'squat', 'sidestep'], icon: 'âš½' },
  { name: 'é‡çƒ', required: ['throw', 'grip', 'sidestep'], icon: 'âš¾' },
  { name: 'ãƒã‚¹ã‚±ãƒƒãƒˆãƒœãƒ¼ãƒ«', required: ['jump', 'dash', 'sidestep'], icon: 'ğŸ€' },
  { name: 'ãƒãƒ¬ãƒ¼ãƒœãƒ¼ãƒ«', required: ['jump', 'sidestep', 'throw'], icon: 'ğŸ' },
  { name: 'ãƒ†ãƒ‹ã‚¹', required: ['sidestep', 'dash', 'grip'], icon: 'ğŸ¾' },
  { name: 'å“çƒ', required: ['sidestep', 'dash'], icon: 'ğŸ“' },
  { name: 'æ°´æ³³', required: ['squat', 'doublejump', 'grip'], icon: 'ğŸŠ' },
  { name: 'é™¸ä¸ŠçŸ­è·é›¢', required: ['dash', 'jump'], icon: 'ğŸƒ' },
  { name: 'é™¸ä¸Šé•·è·é›¢', required: ['squat', 'dash'], icon: 'ğŸƒâ€â™‚ï¸' },
  { name: 'ä½“æ“ç«¶æŠ€', required: ['doublejump', 'jump', 'grip'], icon: 'ğŸ¤¸' },
  { name: 'ãƒ€ãƒ³ã‚¹', required: ['doublejump', 'sidestep', 'jump'], icon: 'ğŸ’ƒ' },
  { name: 'æŸ”é“', required: ['grip', 'squat', 'doublejump'], icon: 'ğŸ¥‹' },
  { name: 'å‰£é“', required: ['sidestep', 'grip', 'squat'], icon: 'âš”ï¸' },
  { name: 'ãƒãƒ‰ãƒŸãƒ³ãƒˆãƒ³', required: ['sidestep', 'jump', 'dash'], icon: 'ğŸ¸' },
  { name: 'ãƒ©ã‚°ãƒ“ãƒ¼', required: ['grip', 'dash', 'squat'], icon: 'ğŸ‰' },
  { name: 'ãƒãƒ³ãƒ‰ãƒœãƒ¼ãƒ«', required: ['throw', 'jump', 'dash'], icon: 'ğŸ¤¾' }
]

// ç™ºé”æ®µéšã‚¢ãƒ‰ãƒã‚¤ã‚¹
export const developmentAdvice: Record<string, {
  golden: string
  focus: string
  focusHighlights: string[]
  key: string
  keyHighlights: string[]
  avoid: string
  avoidHighlights: string[]
}> = {
  'k5': {
    golden: 'ãƒ—ãƒ¬ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¨ã‚¤ã‚¸ï¼ˆ5-8æ­³ï¼‰',
    focus: 'ã“ã®æ™‚æœŸã¯è„³ã¨ç¥çµŒç³»ãŒæ€¥é€Ÿã«ç™ºé”ã—ã€å¤§äººã®ç´„90%ã¾ã§æˆé•·ã—ã¾ã™ã€‚å¤šæ§˜ãªå‹•ãï¼ˆèµ°ã‚‹ãƒ»è·³ã¶ãƒ»æŠ•ã’ã‚‹ãƒ»å›ã‚‹ãƒ»ãƒãƒ©ãƒ³ã‚¹ã‚’ã¨ã‚‹ï¼‰ã‚’çµŒé¨“ã™ã‚‹ã“ã¨ã§ã€é‹å‹•ç¥çµŒã®åœŸå°ãŒå½¢æˆã•ã‚Œã¾ã™ã€‚ä¸€ã¤ã®é‹å‹•ã«ç‰¹åŒ–ã™ã‚‹ã‚ˆã‚Šã‚‚ã€æ§˜ã€…ãªå‹•ãã‚’ã€ŒéŠã³ã€ã¨ã—ã¦æ¥½ã—ã‚€ã“ã¨ãŒã€å°†æ¥ã®é‹å‹•èƒ½åŠ›ã‚’æ±ºå®šã¥ã‘ã‚‹æœ€ã‚‚é‡è¦ãªæ™‚æœŸã§ã™ã€‚ç¥çµŒç³»ã®ç™ºé”ãŒãƒ”ãƒ¼ã‚¯ã‚’è¿ãˆã‚‹ã“ã®æ™‚æœŸã«ã€ã„ã‹ã«å¤šãã®é‹å‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’çµŒé¨“ã§ãã‚‹ã‹ãŒéµã¨ãªã‚Šã¾ã™ã€‚',
    focusHighlights: ['å¤§äººã®ç´„90%ã¾ã§æˆé•·', 'é‹å‹•ç¥çµŒã®åœŸå°', 'æœ€ã‚‚é‡è¦ãªæ™‚æœŸ', 'ç¥çµŒç³»ã®ç™ºé”ãŒãƒ”ãƒ¼ã‚¯'],
    key: 'ã€Œæ¥½ã—ã„ã€ã¨ã„ã†æ„Ÿæƒ…ã‚’æœ€å„ªå…ˆã«ã€é¬¼ã”ã£ã“ãƒ»ãƒœãƒ¼ãƒ«éŠã³ãƒ»ã‚¢ã‚¹ãƒ¬ãƒãƒƒã‚¯ãªã©ã€éŠã³ã®ä¸­ã§è‡ªç„¶ã«ä½“ã‚’å‹•ã‹ã™ã“ã¨ãŒåŠ¹æœçš„ã§ã™ã€‚è¦ªå­ã§ä¸€ç·’ã«ä½“ã‚’å‹•ã‹ã™ã“ã¨ã§ã€é‹å‹•ã¸ã®æ„æ¬²ã‚‚é«˜ã¾ã‚Šã¾ã™ã€‚ã“ã®æ™‚æœŸã®é‹å‹•ä½“é¨“ã¯ã€è„³ã®ç¥çµŒå›è·¯å½¢æˆã«ç›´çµã™ã‚‹ãŸã‚ã€è³ªã‚ˆã‚Šé‡ã§å¤šæ§˜ãªå‹•ãã‚’çµŒé¨“ã•ã›ã¾ã—ã‚‡ã†ã€‚',
    keyHighlights: ['ã€Œæ¥½ã—ã„ã€ã¨ã„ã†æ„Ÿæƒ…ã‚’æœ€å„ªå…ˆ', 'éŠã³ã®ä¸­ã§è‡ªç„¶ã«', 'è¦ªå­ã§ä¸€ç·’ã«', 'è„³ã®ç¥çµŒå›è·¯å½¢æˆ'],
    avoid: 'åŒã˜å‹•ä½œã®åå¾©ç·´ç¿’ã‚„å‹ã¡è² ã‘ã¸ã®éåº¦ãªã“ã ã‚ã‚Šã¯ã€é‹å‹•å«Œã„ã®åŸå› ã«ãªã‚Šã‹ã­ã¾ã›ã‚“ã€‚ã“ã®æ™‚æœŸã¯ã€Œã§ããŸï¼ã€ã¨ã„ã†æˆåŠŸä½“é¨“ã‚’ç©ã¿é‡ã­ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚ç„¡ç†ãªæŠ€è¡“æŒ‡å°ã‚ˆã‚Šã‚‚ã€ã¾ãšé‹å‹•ã‚’å¥½ãã«ãªã£ã¦ã‚‚ã‚‰ã†ã“ã¨ã‚’ç›®æ¨™ã«ã—ã¾ã—ã‚‡ã†ã€‚',
    avoidHighlights: ['é‹å‹•å«Œã„ã®åŸå› ', 'ã€Œã§ããŸï¼ã€ã¨ã„ã†æˆåŠŸä½“é¨“', 'é‹å‹•ã‚’å¥½ãã«ãªã£ã¦ã‚‚ã‚‰ã†']
  },
  '1': {
    golden: 'ãƒ—ãƒ¬ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¨ã‚¤ã‚¸ï¼ˆ5-8æ­³ï¼‰',
    focus: 'ã“ã®æ™‚æœŸã¯è„³ã¨ç¥çµŒç³»ãŒæ€¥é€Ÿã«ç™ºé”ã—ã€å¤§äººã®ç´„90%ã¾ã§æˆé•·ã—ã¾ã™ã€‚å¤šæ§˜ãªå‹•ãï¼ˆèµ°ã‚‹ãƒ»è·³ã¶ãƒ»æŠ•ã’ã‚‹ãƒ»å›ã‚‹ãƒ»ãƒãƒ©ãƒ³ã‚¹ã‚’ã¨ã‚‹ï¼‰ã‚’çµŒé¨“ã™ã‚‹ã“ã¨ã§ã€é‹å‹•ç¥çµŒã®åœŸå°ãŒå½¢æˆã•ã‚Œã¾ã™ã€‚ä¸€ã¤ã®é‹å‹•ã«ç‰¹åŒ–ã™ã‚‹ã‚ˆã‚Šã‚‚ã€æ§˜ã€…ãªå‹•ãã‚’ã€ŒéŠã³ã€ã¨ã—ã¦æ¥½ã—ã‚€ã“ã¨ãŒã€å°†æ¥ã®é‹å‹•èƒ½åŠ›ã‚’æ±ºå®šã¥ã‘ã‚‹æœ€ã‚‚é‡è¦ãªæ™‚æœŸã§ã™ã€‚å­¦æ ¡ä½“è‚²ã ã‘ã§ãªãã€æ—¥å¸¸ç”Ÿæ´»ã§ã®é‹å‹•æ©Ÿä¼šã‚’å¢—ã‚„ã™ã“ã¨ãŒé‡è¦ã§ã™ã€‚',
    focusHighlights: ['å¤§äººã®ç´„90%ã¾ã§æˆé•·', 'é‹å‹•ç¥çµŒã®åœŸå°', 'æœ€ã‚‚é‡è¦ãªæ™‚æœŸ', 'é‹å‹•æ©Ÿä¼šã‚’å¢—ã‚„ã™'],
    key: 'ã€Œæ¥½ã—ã„ã€ã¨ã„ã†æ„Ÿæƒ…ã‚’æœ€å„ªå…ˆã«ã€é¬¼ã”ã£ã“ãƒ»ãƒœãƒ¼ãƒ«éŠã³ãƒ»ã‚¢ã‚¹ãƒ¬ãƒãƒƒã‚¯ãªã©ã€éŠã³ã®ä¸­ã§è‡ªç„¶ã«ä½“ã‚’å‹•ã‹ã™ã“ã¨ãŒåŠ¹æœçš„ã§ã™ã€‚è¦ªå­ã§ä¸€ç·’ã«ä½“ã‚’å‹•ã‹ã™ã“ã¨ã§ã€é‹å‹•ã¸ã®æ„æ¬²ã‚‚é«˜ã¾ã‚Šã¾ã™ã€‚å‹é”ã¨ã®å¤–éŠã³ã‚’æ¨å¥¨ã—ã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³èƒ½åŠ›ã‚‚åŒæ™‚ã«è‚²ã¿ã¾ã—ã‚‡ã†ã€‚',
    keyHighlights: ['ã€Œæ¥½ã—ã„ã€ã¨ã„ã†æ„Ÿæƒ…ã‚’æœ€å„ªå…ˆ', 'éŠã³ã®ä¸­ã§è‡ªç„¶ã«', 'è¦ªå­ã§ä¸€ç·’ã«', 'å‹é”ã¨ã®å¤–éŠã³'],
    avoid: 'åŒã˜å‹•ä½œã®åå¾©ç·´ç¿’ã‚„å‹ã¡è² ã‘ã¸ã®éåº¦ãªã“ã ã‚ã‚Šã¯ã€é‹å‹•å«Œã„ã®åŸå› ã«ãªã‚Šã‹ã­ã¾ã›ã‚“ã€‚ã“ã®æ™‚æœŸã¯ã€Œã§ããŸï¼ã€ã¨ã„ã†æˆåŠŸä½“é¨“ã‚’ç©ã¿é‡ã­ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚ä»–ã®å­ã¨ã®æ¯”è¼ƒã¯é¿ã‘ã€å€‹äººã®æˆé•·ã‚’è¤’ã‚ã¦ã‚ã’ã¾ã—ã‚‡ã†ã€‚',
    avoidHighlights: ['é‹å‹•å«Œã„ã®åŸå› ', 'ã€Œã§ããŸï¼ã€ã¨ã„ã†æˆåŠŸä½“é¨“', 'ä»–ã®å­ã¨ã®æ¯”è¼ƒã¯é¿ã‘']
  },
  '2': {
    golden: 'ãƒ—ãƒ¬ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¨ã‚¤ã‚¸ï¼ˆ5-8æ­³ï¼‰',
    focus: 'ã“ã®æ™‚æœŸã¯è„³ã¨ç¥çµŒç³»ãŒæ€¥é€Ÿã«ç™ºé”ã—ã€å¤§äººã®ç´„90%ã¾ã§æˆé•·ã—ã¾ã™ã€‚å¤šæ§˜ãªå‹•ãï¼ˆèµ°ã‚‹ãƒ»è·³ã¶ãƒ»æŠ•ã’ã‚‹ãƒ»å›ã‚‹ãƒ»ãƒãƒ©ãƒ³ã‚¹ã‚’ã¨ã‚‹ï¼‰ã‚’çµŒé¨“ã™ã‚‹ã“ã¨ã§ã€é‹å‹•ç¥çµŒã®åœŸå°ãŒå½¢æˆã•ã‚Œã¾ã™ã€‚ä¸€ã¤ã®é‹å‹•ã«ç‰¹åŒ–ã™ã‚‹ã‚ˆã‚Šã‚‚ã€æ§˜ã€…ãªå‹•ãã‚’ã€ŒéŠã³ã€ã¨ã—ã¦æ¥½ã—ã‚€ã“ã¨ãŒã€å°†æ¥ã®é‹å‹•èƒ½åŠ›ã‚’æ±ºå®šã¥ã‘ã‚‹æœ€ã‚‚é‡è¦ãªæ™‚æœŸã§ã™ã€‚ã“ã®å¹´é½¢ã§ã¯ç‰¹ã«ãƒãƒ©ãƒ³ã‚¹æ„Ÿè¦šã¨å”èª¿æ€§ãŒç™ºé”ã—ã‚„ã™ã„æ™‚æœŸã§ã™ã€‚',
    focusHighlights: ['å¤§äººã®ç´„90%ã¾ã§æˆé•·', 'é‹å‹•ç¥çµŒã®åœŸå°', 'æœ€ã‚‚é‡è¦ãªæ™‚æœŸ', 'ãƒãƒ©ãƒ³ã‚¹æ„Ÿè¦šã¨å”èª¿æ€§'],
    key: 'ã€Œæ¥½ã—ã„ã€ã¨ã„ã†æ„Ÿæƒ…ã‚’æœ€å„ªå…ˆã«ã€é¬¼ã”ã£ã“ãƒ»ãƒœãƒ¼ãƒ«éŠã³ãƒ»ã‚¢ã‚¹ãƒ¬ãƒãƒƒã‚¯ãªã©ã€éŠã³ã®ä¸­ã§è‡ªç„¶ã«ä½“ã‚’å‹•ã‹ã™ã“ã¨ãŒåŠ¹æœçš„ã§ã™ã€‚è¦ªå­ã§ä¸€ç·’ã«ä½“ã‚’å‹•ã‹ã™ã“ã¨ã§ã€é‹å‹•ã¸ã®æ„æ¬²ã‚‚é«˜ã¾ã‚Šã¾ã™ã€‚ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¨ã‚¤ã‚¸ã«å‘ã‘ã¦ã€å¾ã€…ã«è¤‡é›‘ãªå‹•ãã«ã‚‚ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã•ã›ã¾ã—ã‚‡ã†ã€‚',
    keyHighlights: ['ã€Œæ¥½ã—ã„ã€ã¨ã„ã†æ„Ÿæƒ…ã‚’æœ€å„ªå…ˆ', 'éŠã³ã®ä¸­ã§è‡ªç„¶ã«', 'è¦ªå­ã§ä¸€ç·’ã«', 'ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¨ã‚¤ã‚¸ã«å‘ã‘ã¦'],
    avoid: 'åŒã˜å‹•ä½œã®åå¾©ç·´ç¿’ã‚„å‹ã¡è² ã‘ã¸ã®éåº¦ãªã“ã ã‚ã‚Šã¯ã€é‹å‹•å«Œã„ã®åŸå› ã«ãªã‚Šã‹ã­ã¾ã›ã‚“ã€‚ã“ã®æ™‚æœŸã¯ã€Œã§ããŸï¼ã€ã¨ã„ã†æˆåŠŸä½“é¨“ã‚’ç©ã¿é‡ã­ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚å®Œç’§ã‚’æ±‚ã‚ãšã€æŒ‘æˆ¦ã™ã‚‹å§¿å‹¢ã‚’èªã‚ã¦ã‚ã’ã¾ã—ã‚‡ã†ã€‚',
    avoidHighlights: ['é‹å‹•å«Œã„ã®åŸå› ', 'ã€Œã§ããŸï¼ã€ã¨ã„ã†æˆåŠŸä½“é¨“', 'æŒ‘æˆ¦ã™ã‚‹å§¿å‹¢ã‚’èªã‚ã¦']
  },
  '3': {
    golden: 'ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¨ã‚¤ã‚¸ï¼ˆ9-12æ­³ï¼‰',
    focus: 'äººç”Ÿã§æœ€ã‚‚é‹å‹•ç¥çµŒãŒç™ºé”ã™ã‚‹ã€Œã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¨ã‚¤ã‚¸ã€ã®å§‹ã¾ã‚Šã§ã™ã€‚ã“ã®æ™‚æœŸã«ç¿’å¾—ã—ãŸå‹•ãã¯ä¸€ç”Ÿå¿˜ã‚Œã¾ã›ã‚“ã€‚ã€Œè¦‹ãŸã‚‰ã™ãã«ã§ãã‚‹ã€ã€Œå³åº§ã®ç¿’å¾—ã€ãŒå¯èƒ½ãªè²´é‡ãªæ™‚æœŸã§ã‚ã‚Šã€æ§˜ã€…ãªã‚¹ãƒãƒ¼ãƒ„ã®åŸºæœ¬æŠ€è¡“ã‚’åŠ¹ç‡çš„ã«èº«ã«ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒ—ãƒ­ã‚¹ãƒãƒ¼ãƒ„é¸æ‰‹ã®å¤šããŒã€ã“ã®æ™‚æœŸã«å°‚é–€ç«¶æŠ€ã®åŸºç¤ã‚’ç¿’å¾—ã—ã¦ã„ã¾ã™ã€‚ä»Šã“ãå¤šæ§˜ãªã‚¹ãƒãƒ¼ãƒ„ä½“é¨“ã‚’ã•ã›ã‚‹çµ¶å¥½ã®ãƒãƒ£ãƒ³ã‚¹ã§ã™ã€‚',
    focusHighlights: ['äººç”Ÿã§æœ€ã‚‚é‹å‹•ç¥çµŒãŒç™ºé”', 'ä¸€ç”Ÿå¿˜ã‚Œã¾ã›ã‚“', 'ã€Œå³åº§ã®ç¿’å¾—ã€ãŒå¯èƒ½', 'ãƒ—ãƒ­ã‚¹ãƒãƒ¼ãƒ„é¸æ‰‹ã®å¤šããŒ'],
    key: 'æ­£ã—ã„ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã€Œè¦‹ã›ã¦ã€è¦šãˆã•ã›ã‚‹ã“ã¨ãŒæœ€ã‚‚åŠ¹æœçš„ã§ã™ã€‚å‹•ç”»ã‚„ãŠæ‰‹æœ¬ã‚’è¦‹ã›ãªãŒã‚‰ã€ç´°ã‹ã„æŠ€è¡“ã‚’ä¸å¯§ã«æ•™ãˆã¾ã—ã‚‡ã†ã€‚è¤‡æ•°ã®ã‚¹ãƒãƒ¼ãƒ„ã‚’çµŒé¨“ã™ã‚‹ã“ã¨ã§ã€å¿œç”¨åŠ›ã‚‚èº«ã«ã¤ãã¾ã™ã€‚ãŠå­æ§˜ãŒèˆˆå‘³ã‚’ç¤ºã—ãŸã‚¹ãƒãƒ¼ãƒ„ã«ã¯ç©æ¥µçš„ã«æŒ‘æˆ¦ã•ã›ã¦ã‚ã’ã¦ãã ã•ã„ã€‚',
    keyHighlights: ['ã€Œè¦‹ã›ã¦ã€è¦šãˆã•ã›ã‚‹', 'ç´°ã‹ã„æŠ€è¡“ã‚’ä¸å¯§ã«', 'è¤‡æ•°ã®ã‚¹ãƒãƒ¼ãƒ„ã‚’çµŒé¨“', 'ç©æ¥µçš„ã«æŒ‘æˆ¦'],
    avoid: 'ç­‹åŠ›ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã¯ã¾ã æ—©ã„æ®µéšã§ã™ã€‚æŠ€è¡“ç¿’å¾—ã¨ã‚³ãƒ¼ãƒ‡ã‚£ãƒãƒ¼ã‚·ãƒ§ãƒ³èƒ½åŠ›ã®å‘ä¸Šã‚’å„ªå…ˆã—ã€æˆé•·æœŸã®ä½“ã«éåº¦ãªè² æ‹…ã‚’ã‹ã‘ãªã„ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚éª¨ã‚„é–¢ç¯€ãŒã¾ã ç™ºé”é€”ä¸­ã®ãŸã‚ã€ã‚ªãƒ¼ãƒãƒ¼ãƒ¦ãƒ¼ã‚¹ã«ã‚ˆã‚‹æ€ªæˆ‘ã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚',
    avoidHighlights: ['ç­‹åŠ›ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã¯ã¾ã æ—©ã„', 'éåº¦ãªè² æ‹…ã‚’ã‹ã‘ãªã„', 'ã‚ªãƒ¼ãƒãƒ¼ãƒ¦ãƒ¼ã‚¹ã«ã‚ˆã‚‹æ€ªæˆ‘']
  },
  '4': {
    golden: 'ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¨ã‚¤ã‚¸ï¼ˆ9-12æ­³ï¼‰',
    focus: 'äººç”Ÿã§æœ€ã‚‚é‹å‹•ç¥çµŒãŒç™ºé”ã™ã‚‹ã€Œã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¨ã‚¤ã‚¸ã€ã®çœŸã£åªä¸­ã§ã™ã€‚ã“ã®æ™‚æœŸã«ç¿’å¾—ã—ãŸå‹•ãã¯ä¸€ç”Ÿå¿˜ã‚Œã¾ã›ã‚“ã€‚è¤‡é›‘ãªå‹•ãã‚‚ã€Œè¦‹ãŸã ã‘ã§ã§ãã‚‹ã€ã¨ã„ã†é©šãã¹ãå­¦ç¿’èƒ½åŠ›ã‚’ç™ºæ®ã—ã¾ã™ã€‚æ§˜ã€…ãªã‚¹ãƒãƒ¼ãƒ„ã®åŸºæœ¬æŠ€è¡“ã‚’çŸ­æœŸé–“ã§èº«ã«ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã€é‹å‹•èƒ½åŠ›å‘ä¸Šã®ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¿ã‚¤ãƒ ã§ã™ã€‚ã“ã®è²´é‡ãªæ™‚æœŸã‚’æœ€å¤§é™ã«æ´»ã‹ã—ã¾ã—ã‚‡ã†ã€‚',
    focusHighlights: ['ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¨ã‚¤ã‚¸ã®çœŸã£åªä¸­', 'ä¸€ç”Ÿå¿˜ã‚Œã¾ã›ã‚“', 'é©šãã¹ãå­¦ç¿’èƒ½åŠ›', 'é‹å‹•èƒ½åŠ›å‘ä¸Šã®ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¿ã‚¤ãƒ '],
    key: 'ã€Œå³åº§ã®ç¿’å¾—ã€ãŒå¯èƒ½ãªã“ã®æ™‚æœŸã«ã€æ§˜ã€…ãªåŸºæœ¬æŠ€è¡“ã‚’çµŒé¨“ã•ã›ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚ä¸€ã¤ã®ã‚¹ãƒãƒ¼ãƒ„ã ã‘ã§ãªãã€è¤‡æ•°ã®ã‚¹ãƒãƒ¼ãƒ„ã‚’çµŒé¨“ã™ã‚‹ã“ã¨ã§ã€ç·åˆçš„ãªé‹å‹•ã‚»ãƒ³ã‚¹ãŒç£¨ã‹ã‚Œã¾ã™ã€‚æŠ€è¡“ã®ç´°ã‹ã„ãƒã‚¤ãƒ³ãƒˆã‚’æ•™ãˆã‚‹ã®ã«æœ€é©ãªæ™‚æœŸã§ã™ã€‚',
    keyHighlights: ['ã€Œå³åº§ã®ç¿’å¾—ã€ãŒå¯èƒ½', 'æ§˜ã€…ãªåŸºæœ¬æŠ€è¡“ã‚’çµŒé¨“', 'ç·åˆçš„ãªé‹å‹•ã‚»ãƒ³ã‚¹', 'æŠ€è¡“ã®ç´°ã‹ã„ãƒã‚¤ãƒ³ãƒˆ'],
    avoid: 'éåº¦ãªç­‹åŠ›ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã¯æˆé•·ã‚’å¦¨ã’ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æŠ€è¡“ç·´ç¿’ã‚’é‡è¦–ã—ã€ä½“ã¸ã®è² æ‹…ã¯é©åº¦ã«æŠ‘ãˆã¾ã—ã‚‡ã†ã€‚å‹åˆ©ã¸ã®ã“ã ã‚ã‚Šã™ãã«ã‚‚æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚æ¥½ã—ã¿ãªãŒã‚‰ä¸Šé”ã§ãã‚‹ç’°å¢ƒã¥ãã‚Šã‚’å¿ƒãŒã‘ã¦ãã ã•ã„ã€‚',
    avoidHighlights: ['æˆé•·ã‚’å¦¨ã’ã‚‹å¯èƒ½æ€§', 'æŠ€è¡“ç·´ç¿’ã‚’é‡è¦–', 'å‹åˆ©ã¸ã®ã“ã ã‚ã‚Šã™ã', 'æ¥½ã—ã¿ãªãŒã‚‰ä¸Šé”']
  },
  '5': {
    golden: 'ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¨ã‚¤ã‚¸ï¼ˆ9-12æ­³ï¼‰',
    focus: 'é‹å‹•ç¥çµŒç™ºé”ã®é»„é‡‘æœŸã‚‚å¾ŒåŠã«å·®ã—æ›ã‹ã£ã¦ã„ã¾ã™ã€‚ã“ã®æ™‚æœŸã«èº«ã«ã¤ã‘ãŸé‹å‹•èƒ½åŠ›ã¯ç”Ÿæ¶¯ã®è²¡ç”£ã¨ãªã‚Šã¾ã™ã€‚ã‚ˆã‚Šè¤‡é›‘ã§é«˜åº¦ãªæŠ€è¡“ã®ç¿’å¾—ã‚‚å¯èƒ½ã«ãªã‚Šã€å°‚é–€çš„ãªç·´ç¿’ã«ã‚‚å–ã‚Šçµ„ã‚ã‚‹æ™‚æœŸã§ã™ã€‚ä½“ã®æˆé•·ã¨ã¨ã‚‚ã«ã€æŒä¹…åŠ›ã‚„ç­‹åŠ›ã‚‚å¾ã€…ã«å‘ä¸Šã—ã¦ãã¾ã™ã€‚ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¨ã‚¤ã‚¸çµ‚ç›¤ã‚’æœ‰åŠ¹ã«æ´»ç”¨ã—ã¾ã—ã‚‡ã†ã€‚',
    focusHighlights: ['é»„é‡‘æœŸã‚‚å¾ŒåŠ', 'ç”Ÿæ¶¯ã®è²¡ç”£', 'é«˜åº¦ãªæŠ€è¡“ã®ç¿’å¾—ã‚‚å¯èƒ½', 'æŒä¹…åŠ›ã‚„ç­‹åŠ›ã‚‚å¾ã€…ã«å‘ä¸Š'],
    key: 'è¤‡é›‘ãªå‹•ãã‚‚ç¿’å¾—å¯èƒ½ãªæ™‚æœŸã§ã™ã€‚å°‚é–€çš„ãªæŠ€è¡“ç·´ç¿’ã«å–ã‚Šçµ„ã¿ã¤ã¤ã€åŸºç¤ä½“åŠ›ã®å‘ä¸Šã‚‚å›³ã‚Šã¾ã—ã‚‡ã†ã€‚è‡ªåˆ†ã«åˆã£ãŸã‚¹ãƒãƒ¼ãƒ„ã‚’è¦‹ã¤ã‘ã‚‹è‰¯ã„æ©Ÿä¼šã§ã‚‚ã‚ã‚Šã¾ã™ã€‚å¾—æ„ãªã‚¹ãƒãƒ¼ãƒ„ã‚’ä¼¸ã°ã—ãªãŒã‚‰ã€è‹¦æ‰‹ãªå‹•ãã«ã‚‚ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã•ã›ã¾ã—ã‚‡ã†ã€‚',
    keyHighlights: ['è¤‡é›‘ãªå‹•ãã‚‚ç¿’å¾—å¯èƒ½', 'å°‚é–€çš„ãªæŠ€è¡“ç·´ç¿’', 'è‡ªåˆ†ã«åˆã£ãŸã‚¹ãƒãƒ¼ãƒ„', 'è‹¦æ‰‹ãªå‹•ãã«ã‚‚ãƒãƒ£ãƒ¬ãƒ³ã‚¸'],
    avoid: 'å‹åˆ©è‡³ä¸Šä¸»ç¾©ã«é™¥ã‚‰ãªã„ã‚ˆã†æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚é‹å‹•ã‚’ã€Œæ¥½ã—ã‚€ã€æ°—æŒã¡ã¨ã®ãƒãƒ©ãƒ³ã‚¹ã‚’å¤§åˆ‡ã«ã—ã€ç‡ƒãˆå°½ãç—‡å€™ç¾¤ã‚’é˜²ãã¾ã—ã‚‡ã†ã€‚ç²¾ç¥çš„ãªãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã‚’ã‹ã‘ã™ããªã„ã‚ˆã†é…æ…®ã—ã¦ãã ã•ã„ã€‚',
    avoidHighlights: ['å‹åˆ©è‡³ä¸Šä¸»ç¾©ã«é™¥ã‚‰ãªã„', 'ã€Œæ¥½ã—ã‚€ã€æ°—æŒã¡ã¨ã®ãƒãƒ©ãƒ³ã‚¹', 'ç‡ƒãˆå°½ãç—‡å€™ç¾¤ã‚’é˜²ã', 'ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã‚’ã‹ã‘ã™ããªã„']
  },
  '6': {
    golden: 'ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¨ã‚¤ã‚¸çµ‚ç›¤',
    focus: 'ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¨ã‚¤ã‚¸ã®çµ‚ç›¤ã‹ã‚‰ã€Œãƒã‚¹ãƒˆã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¨ã‚¤ã‚¸ã€ã¸ã®ç§»è¡ŒæœŸã§ã™ã€‚ä½“æ ¼å·®ãŒå‡ºå§‹ã‚ã€å¿ƒè‚ºæ©Ÿèƒ½ã‚‚ç™ºé”ã™ã‚‹æ™‚æœŸã§ã™ã€‚ã“ã‚Œã¾ã§ã«åŸ¹ã£ãŸé‹å‹•ç¥çµŒã‚’æ´»ã‹ã—ãªãŒã‚‰ã€ä½“åŠ›é¢ã®å¼·åŒ–ã‚‚è¦–é‡ã«å…¥ã‚Œã¦ã„ãæ®µéšã§ã™ã€‚ä¸­å­¦ç”Ÿã«å‘ã‘ã¦ã€ã‚ˆã‚Šå°‚é–€çš„ãªãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã¸ã®æº–å‚™ãŒå§‹ã¾ã‚Šã¾ã™ã€‚ç¬¬äºŒæ¬¡æˆé•·æœŸã‚’è¿ãˆã€ä½“ãŒå¤§ããå¤‰åŒ–ã™ã‚‹æ™‚æœŸã§ã‚‚ã‚ã‚Šã¾ã™ã€‚',
    focusHighlights: ['ãƒã‚¹ãƒˆã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¨ã‚¤ã‚¸ã¸ã®ç§»è¡ŒæœŸ', 'å¿ƒè‚ºæ©Ÿèƒ½ã‚‚ç™ºé”', 'å°‚é–€çš„ãªãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã¸ã®æº–å‚™', 'ç¬¬äºŒæ¬¡æˆé•·æœŸ'],
    key: 'æŒä¹…åŠ›ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’å°‘ã—ãšã¤å°å…¥ã—ã€ä½“åŠ›ã®å‘ä¸Šã‚’å›³ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å°‚é–€ç«¶æŠ€ã¸ã®å–ã‚Šçµ„ã¿ã‚’æœ¬æ ¼åŒ–ã•ã›ã¤ã¤ã€æ€ªæˆ‘äºˆé˜²ã®ãŸã‚ã®ã‚¹ãƒˆãƒ¬ãƒƒãƒã‚‚ç¿’æ…£åŒ–ã—ã¾ã—ã‚‡ã†ã€‚è‡ªåˆ†ã®ç›®æ¨™ã‚’æŒã£ã¦å–ã‚Šçµ„ã‚€å§¿å‹¢ã‚’è‚²ã¦ã¾ã—ã‚‡ã†ã€‚',
    keyHighlights: ['æŒä¹…åŠ›ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’å°‘ã—ãšã¤å°å…¥', 'å°‚é–€ç«¶æŠ€ã¸ã®å–ã‚Šçµ„ã¿ã‚’æœ¬æ ¼åŒ–', 'ã‚¹ãƒˆãƒ¬ãƒƒãƒã‚‚ç¿’æ…£åŒ–', 'è‡ªåˆ†ã®ç›®æ¨™ã‚’æŒã£ã¦'],
    avoid: 'æ€¥æ¿€ãªç­‹åŠ›ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã¯é¿ã‘ã€å¾ã€…ã«è² è·ã‚’ä¸Šã’ã¦ã„ãã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚æˆé•·æœŸã®ã‚ªãƒ¼ãƒãƒ¼ãƒ¯ãƒ¼ã‚¯ã¯æ€ªæˆ‘ã®åŸå› ã«ãªã‚‹ãŸã‚ã€ä¼‘é¤Šã¨ã®ãƒãƒ©ãƒ³ã‚¹ã‚’æ„è­˜ã—ã¾ã—ã‚‡ã†ã€‚æˆé•·ç—›ã«ã‚‚æ³¨æ„ã—ã€ç•°å¤‰ã‚’æ„Ÿã˜ãŸã‚‰æ—©ã‚ã«ä¼‘ã¾ã›ã¦ãã ã•ã„ã€‚',
    avoidHighlights: ['æ€¥æ¿€ãªç­‹åŠ›ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã¯é¿ã‘', 'ã‚ªãƒ¼ãƒãƒ¼ãƒ¯ãƒ¼ã‚¯ã¯æ€ªæˆ‘ã®åŸå› ', 'ä¼‘é¤Šã¨ã®ãƒãƒ©ãƒ³ã‚¹', 'æˆé•·ç—›ã«ã‚‚æ³¨æ„']
  }
}

// åå·®å€¤è¨ˆç®—
export function calcDeviation(value: number, average: number, stdDev: number, reverse = false): number {
  return reverse
    ? 50 + 10 * (average - value) / stdDev
    : 50 + 10 * (value - average) / stdDev
}

// åå·®å€¤ã‹ã‚‰10æ®µéšè©•ä¾¡
export function deviationTo10Scale(deviation: number): number {
  if (deviation >= 70) return 10
  if (deviation >= 65) return 9
  if (deviation >= 60) return 8
  if (deviation >= 55) return 7
  if (deviation >= 50) return 6
  if (deviation >= 45) return 5
  if (deviation >= 40) return 4
  if (deviation >= 35) return 3
  if (deviation >= 30) return 2
  return 1
}

// ã‚°ãƒ¬ãƒ¼ãƒ‰åˆ¤å®š
export function getGrade(score: number): { grade: string; colorClass: string } {
  if (score >= 8) return { grade: 'A', colorClass: 'text-blue-600' }
  if (score >= 6) return { grade: 'B', colorClass: 'text-green-600' }
  if (score >= 5) return { grade: 'C', colorClass: 'text-yellow-600' }
  if (score >= 3) return { grade: 'D', colorClass: 'text-orange-600' }
  return { grade: 'E', colorClass: 'text-red-600' }
}

// å­¦å¹´ã‹ã‚‰å®Ÿå¹´é½¢ã‚’å–å¾—
export function getActualAge(grade: string): number {
  const ages: Record<string, number> = {
    'k5': 6, '1': 7, '2': 8, '3': 9, '4': 10, '5': 11, '6': 12
  }
  return ages[grade] || 10
}

// 15mãƒ€ãƒƒã‚·ãƒ¥ã‹ã‚‰50mèµ°ã‚¿ã‚¤ãƒ ã‚’æ¨å®šï¼ˆåŠ é€Ÿåº¦ã‚’è€ƒæ…®ï¼‰
// çŸ­è·é›¢èµ°ã®ç‰¹æ€§ï¼šæœ€åˆã®15mã¯åŠ é€ŸåŒºé–“ã§é…ãã€ãã®å¾Œã¯æœ€é«˜é€Ÿåº¦ã«è¿‘ã¥ã
// ç‰©ç†ãƒ¢ãƒ‡ãƒ«: ç­‰åŠ é€Ÿåº¦é‹å‹•ã‹ã‚‰æœ€é«˜é€Ÿåº¦ã¸ã®ç§»è¡Œã‚’è€ƒæ…®
export function estimate50mTime(dash15m: number, grade: string): number {
  // 15mã®å¹³å‡é€Ÿåº¦ (m/s)
  const avgSpeed15m = 15 / dash15m

  // å­¦å¹´åˆ¥ã®åŠ é€Ÿä¿‚æ•°ï¼ˆé«˜å­¦å¹´ã»ã©åŠ é€ŸãŒåŠ¹ç‡çš„ï¼‰
  // ä¿‚æ•°ãŒé«˜ã„ã»ã©å¾ŒåŠã®é€Ÿåº¦ãŒä¸ŠãŒã‚Šã€50mã‚¿ã‚¤ãƒ ãŒé€Ÿããªã‚‹
  const accelerationFactor: Record<string, number> = {
    'k5': 1.15,  // å¹´é•·: åŠ é€ŸãŒæœªç†Ÿã ãŒå¾ŒåŠã§ä¼¸ã³ã‚‹
    '1': 1.18,   // å°1
    '2': 1.21,   // å°2
    '3': 1.24,   // å°3
    '4': 1.27,   // å°4
    '5': 1.30,   // å°5
    '6': 1.33    // å°6: åŠ é€ŸãŒåŠ¹ç‡çš„ã€å¾ŒåŠå¤§ããä¼¸ã³ã‚‹
  }

  const factor = accelerationFactor[grade] || 1.14

  // 15mä»¥é™ã®35mã¯åŠ é€Ÿå¾Œã®é€Ÿåº¦ã§èµ°ã‚‹
  // æœ€é«˜é€Ÿåº¦ã¯15måŒºé–“ã®å¹³å‡é€Ÿåº¦ã® factor å€ã¨æ¨å®š
  const maxSpeed = avgSpeed15m * factor

  // 50mã‚¿ã‚¤ãƒ  = 15mã‚¿ã‚¤ãƒ  + 35m / æœ€é«˜é€Ÿåº¦
  const estimated50m = dash15m + (35 / maxSpeed)

  // 0.3ç§’é€Ÿãèª¿æ•´ï¼ˆå®Ÿæ¸¬å€¤ã¨ã®ä¹–é›¢è£œæ­£ï¼‰
  const adjusted50m = estimated50m - 0.3

  return Math.round(adjusted50m * 100) / 100
}

// 50mèµ°ã‚¿ã‚¤ãƒ ã‹ã‚‰15mèµ°ã‚¿ã‚¤ãƒ ã‚’é€†ç®—
// estimate50mTimeã®é€†å¤‰æ›ï¼ˆ50mâ†’15mï¼‰
export function estimate15mTime(dash50m: number, grade: string): number {
  // å­¦å¹´åˆ¥ã®åŠ é€Ÿä¿‚æ•°
  const accelerationFactor: Record<string, number> = {
    'k5': 1.15,
    '1': 1.18,
    '2': 1.21,
    '3': 1.24,
    '4': 1.27,
    '5': 1.30,
    '6': 1.33
  }

  const factor = accelerationFactor[grade] || 1.14

  // 50mã‚¿ã‚¤ãƒ ã‹ã‚‰0.3ç§’ã‚’è¶³ã—æˆ»ã™ï¼ˆè£œæ­£ã®é€†ï¼‰
  const unadjusted50m = dash50m + 0.3

  // æ–¹ç¨‹å¼ã‚’è§£ã: unadjusted50m = dash15m + 35 / (15/dash15m * factor)
  // unadjusted50m = dash15m + (35 * dash15m) / (15 * factor)
  // unadjusted50m = dash15m * (1 + 35 / (15 * factor))
  // unadjusted50m = dash15m * (1 + 7 / (3 * factor))
  // dash15m = unadjusted50m / (1 + 7 / (3 * factor))

  const multiplier = 1 + 7 / (3 * factor)
  const dash15m = unadjusted50m / multiplier

  return Math.round(dash15m * 100) / 100
}

// ãƒœãƒ¼ãƒ«é‡é‡ã«ã‚ˆã‚‹æŠ•è·é›¢ã®è£œæ­£ä¿‚æ•°
// åŸºæº–: 1kgï¼ˆã‚½ãƒ•ãƒˆãƒœãƒ¼ãƒ«ç›¸å½“ï¼‰ã‚’1.0ã¨ã—ã¦ã€é‡ã•ã«å¿œã˜ã¦è£œæ­£
// é‡ã„ãƒœãƒ¼ãƒ«ã»ã©é£›è·é›¢ãŒè½ã¡ã‚‹ãŸã‚ã€è£œæ­£ä¿‚æ•°ã‚’æ›ã‘ã¦1kgæ›ç®—ã«ã™ã‚‹
export const ballWeightCorrections: Record<string, { label: string; weight: number; correction: number }> = {
  '500g': { label: '500gä»¥ä¸‹', weight: 0.5, correction: 0.80 },   // è»½ã„ãƒœãƒ¼ãƒ«ã¯é£›ã³ã‚„ã™ã„â†’0.8å€ã§æ›ç®—
  '1kg':  { label: '1kg', weight: 1.0, correction: 1.0 },         // åŸºæº–
  '2kg':  { label: '2kg', weight: 2.0, correction: 1.35 },        // é‡ã„ã®ã§é£›è·é›¢çŸ­ã„â†’1.35å€ã§æ›ç®—
  '3kg':  { label: '3kg', weight: 3.0, correction: 1.70 }         // ã•ã‚‰ã«é‡ã„â†’1.7å€ã§æ›ç®—
}

// 50mèµ°ã‚¿ã‚¤ãƒ ã®è©•ä¾¡åŸºæº–ï¼ˆå­¦å¹´ãƒ»æ€§åˆ¥åˆ¥ï¼‰- å‚è€ƒç”¨
export const sprint50mStandard: Record<string, Record<string, { excellent: number; average: number }>> = {
  'k5': {
    male: { excellent: 10.5, average: 12.0 },
    female: { excellent: 11.0, average: 12.5 }
  },
  '1': {
    male: { excellent: 10.0, average: 11.5 },
    female: { excellent: 10.5, average: 12.0 }
  },
  '2': {
    male: { excellent: 9.5, average: 10.8 },
    female: { excellent: 10.0, average: 11.3 }
  },
  '3': {
    male: { excellent: 9.0, average: 10.2 },
    female: { excellent: 9.5, average: 10.7 }
  },
  '4': {
    male: { excellent: 8.5, average: 9.8 },
    female: { excellent: 9.0, average: 10.3 }
  },
  '5': {
    male: { excellent: 8.0, average: 9.3 },
    female: { excellent: 8.5, average: 9.8 }
  },
  '6': {
    male: { excellent: 7.5, average: 8.8 },
    female: { excellent: 8.0, average: 9.3 }
  }
}

// é‹å‹•å™¨å¹´é½¢è¨ˆç®—
export function calcMotorAge(scores: Record<string, number>, actualAge: number): number {
  const values = Object.values(scores)
  const avg = values.reduce((a, b) => a + b, 0) / values.length
  return Math.round((actualAge + (avg - 5) * 0.8) * 10) / 10
}

// é‹å‹•ã‚¿ã‚¤ãƒ—åˆ¤å®š
export function determineType(scores: Record<string, number>): { name: string; desc: string } {
  const values = Object.values(scores)
  const avg = values.reduce((a, b) => a + b, 0) / values.length
  const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1])
  const maxKey = sorted[0][0]
  const range = sorted[0][1] - sorted[sorted.length - 1][1]

  if (avg >= 8) {
    return {
      name: 'ã‚ªãƒ¼ãƒ«ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¨ãƒªãƒ¼ãƒˆå‹',
      desc: 'å…¨ã¦ã®é‹å‹•èƒ½åŠ›ãŒé«˜æ°´æº–ã§ãƒãƒ©ãƒ³ã‚¹ã‚ˆãç™ºé”ã€‚ã©ã®ã‚¹ãƒãƒ¼ãƒ„ã§ã‚‚æ´»èºã§ãã‚‹ç´ è³ªã€‚'
    }
  }

  if (range >= 3) {
    const typeMap: Record<string, { name: string; desc: string }> = {
      grip: { name: 'ãƒ‘ãƒ¯ãƒ¼ãƒ•ã‚¡ã‚¤ã‚¿ãƒ¼å‹', desc: 'ç­‹åŠ›ã«å„ªã‚Œã€æŠ•ã’ã‚‹ãƒ»æŠ¼ã™ãƒ»å¼•ããªã©ã®ãƒ‘ãƒ¯ãƒ¼ç³»å‹•ä½œã§åŠ›ã‚’ç™ºæ®ã€‚' },
      squat: { name: 'ã‚¹ã‚¿ãƒŸãƒŠã‚¨ãƒªãƒ¼ãƒˆå‹', desc: 'ç­‹æŒä¹…åŠ›ã«å„ªã‚Œã€é•·æ™‚é–“ã®é‹å‹•ã§ã‚‚å®‰å®šã—ãŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ç™ºæ®ã€‚' },
      sidestep: { name: 'ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¹ã‚¿ãƒ¼å‹', desc: 'åå¿œé€Ÿåº¦ã¨æ•æ·æ€§ã«å„ªã‚Œã€ç´ æ—©ã„åˆ¤æ–­ã¨å‹•ä½œãŒå¾—æ„ã€‚' },
      doublejump: { name: 'ãƒãƒ©ãƒ³ã‚¹ãƒã‚¹ã‚¿ãƒ¼å‹', desc: 'ãƒãƒ©ãƒ³ã‚¹èƒ½åŠ›ã«å„ªã‚Œã€ä¸å®‰å®šãªçŠ¶æ³ã§ã‚‚ä½“ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«å¯èƒ½ã€‚' },
      jump: { name: 'ã‚¸ãƒ£ãƒ³ãƒ—ã‚¨ãƒªãƒ¼ãƒˆå‹', desc: 'ä¸‹åŠèº«ã®ç¬ç™ºåŠ›ãŒå„ªã‚Œã€è·³èºåŠ›ã‚’æ´»ã‹ã—ãŸã‚¹ãƒãƒ¼ãƒ„ã«ã‚¢ãƒ‰ãƒãƒ³ãƒ†ãƒ¼ã‚¸ã€‚' },
      dash: { name: 'ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚¹ã‚¿ãƒ¼å‹', desc: 'ä¿Šæ•æ€§ã¨ã‚¹ãƒ”ãƒ¼ãƒ‰ã«å„ªã‚Œã€çŸ­è·é›¢èµ°ã‚„ç´ æ—©ã„å‹•ããŒå¾—æ„ã€‚' },
      throw: { name: 'ã‚¹ãƒ­ãƒ¼ã‚¤ãƒ³ã‚°ã‚¨ãƒ¼ã‚¹å‹', desc: 'æŠ•åŠ›ã«å„ªã‚Œã€æŠ•ã’ã‚‹å‹•ä½œã‚’ä¼´ã†ã‚¹ãƒãƒ¼ãƒ„ã§åŠ›ã‚’ç™ºæ®ã€‚' }
    }
    return typeMap[maxKey] || { name: 'ãƒãƒ©ãƒ³ã‚¹ã‚¢ã‚¹ãƒªãƒ¼ãƒˆå‹', desc: 'å…¨ä½“çš„ã«ãƒãƒ©ãƒ³ã‚¹ã‚ˆãç™ºé”ã€‚æ§˜ã€…ãªã‚¹ãƒãƒ¼ãƒ„ã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã§ãã‚‹åœŸå°ã€‚' }
  }

  if (avg >= 6) {
    return { name: 'ãƒãƒ©ãƒ³ã‚¹ã‚¢ã‚¹ãƒªãƒ¼ãƒˆå‹', desc: 'å…¨ä½“çš„ã«ãƒãƒ©ãƒ³ã‚¹ã‚ˆãç™ºé”ã€‚æ§˜ã€…ãªã‚¹ãƒãƒ¼ãƒ„ã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã§ãã‚‹åœŸå°ã€‚' }
  }

  if (avg >= 4) {
    return { name: 'æˆé•·ã‚¢ã‚¹ãƒªãƒ¼ãƒˆå‹', desc: 'ç¾åœ¨æˆé•·æ®µéšã€‚ç¶™ç¶šçš„ãªé‹å‹•ç¿’æ…£ã«ã‚ˆã‚Šå¤§ããèƒ½åŠ›ãŒä¼¸ã³ã‚‹å¯èƒ½æ€§ã€‚' }
  }

  return { name: 'ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«å‹', desc: 'å¤§ããªä¼¸ã³ã—ã‚ã‚’ç§˜ã‚ã¦ã„ã‚‹ã€‚å¤šæ§˜ãªé‹å‹•çµŒé¨“ã§èƒ½åŠ›ãŒé–‹èŠ±ã€‚' }
}

// ã‚¯ãƒ©ã‚¹åˆ¤å®š
export function determineClass(scores: Record<string, number>): 'beginner' | 'standard' | 'expert' {
  const values = Object.values(scores)
  const avg = values.reduce((a, b) => a + b, 0) / values.length
  const min = Math.min(...values)

  if (avg >= 7 && min >= 5) return 'expert'
  if (avg >= 5) return 'standard'
  return 'beginner'
}

// å¼±ç‚¹ã‚¯ãƒ©ã‚¹åˆ¤å®š
export function getWeaknessClass(scores: Record<string, number>): { key: string; name: string; score: number } {
  const sorted = Object.entries(scores).sort((a, b) => a[1] - b[1])
  const weakest = sorted[0]
  const classMap: Record<string, string> = {
    grip: 'ç­‹åŠ›å¼·åŒ–ã‚¯ãƒ©ã‚¹',
    jump: 'ç¬ç™ºåŠ›ã‚¯ãƒ©ã‚¹',
    dash: 'ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚¯ãƒ©ã‚¹',
    doublejump: 'ãƒãƒ©ãƒ³ã‚¹ã‚¯ãƒ©ã‚¹',
    squat: 'æŒä¹…åŠ›ã‚¯ãƒ©ã‚¹',
    sidestep: 'æ•æ·æ€§ã‚¯ãƒ©ã‚¹',
    throw: 'æŠ•åŠ›ã‚¯ãƒ©ã‚¹'
  }
  return { key: weakest[0], name: classMap[weakest[0]], score: weakest[1] }
}

// é©æ€§ã‚¹ãƒãƒ¼ãƒ„è¨ˆç®—
export function calcSportsAptitude(scores: Record<string, number>) {
  return allSports.map(sport => {
    let total = 0
    sport.required.forEach(key => {
      if (scores[key]) total += scores[key]
    })
    return { ...sport, aptitude: total / sport.required.length }
  }).sort((a, b) => b.aptitude - a.aptitude)
}

// è¨ºæ–­å®Ÿè¡Œï¼ˆãƒ•ãƒ«ï¼‰
export function runDiagnosis(
  grade: string,
  gender: 'male' | 'female',
  measurements: {
    gripAvg: number
    jump: number
    dash: number
    doublejump?: number
    squat?: number
    sidestep?: number
    throw?: number
  },
  mode: 'simple' | 'detail'
) {
  const avg = averageData[grade][gender]
  const actualAge = getActualAge(grade)

  // åå·®å€¤è¨ˆç®—
  const deviations: Record<string, number> = {
    grip: calcDeviation(measurements.gripAvg, avg.grip, sd.grip),
    jump: calcDeviation(measurements.jump, avg.jump, sd.jump),
    dash: calcDeviation(measurements.dash, avg.dash, sd.dash, true) // ã‚¿ã‚¤ãƒ ã¯é€†è»¢
  }

  if (mode === 'detail' && measurements.doublejump !== undefined) {
    deviations.doublejump = calcDeviation(measurements.doublejump, avg.doublejump, sd.doublejump)
    deviations.squat = calcDeviation(measurements.squat!, avg.squat, sd.squat)
    deviations.sidestep = calcDeviation(measurements.sidestep!, avg.sidestep, sd.sidestep)
    deviations.throw = calcDeviation(measurements.throw!, avg.throw, sd.throw)
  }

  // 10æ®µéšè©•ä¾¡
  const scores: Record<string, number> = {}
  for (const key in deviations) {
    scores[key] = deviationTo10Scale(deviations[key])
  }

  // é‹å‹•å™¨å¹´é½¢
  const motorAge = calcMotorAge(scores, actualAge)
  const motorAgeDiff = motorAge - actualAge

  // é‹å‹•ã‚¿ã‚¤ãƒ—
  const type = determineType(scores)

  // ã‚¯ãƒ©ã‚¹åˆ¤å®š
  const classLevel = determineClass(scores)

  // å¼±ç‚¹ã‚¯ãƒ©ã‚¹
  const weaknessClass = getWeaknessClass(scores)

  // é©æ€§ã‚¹ãƒãƒ¼ãƒ„
  const sportsAptitude = calcSportsAptitude(scores)

  // 1ãƒ¶æœˆç›®æ¨™
  const goals: Record<string, number> = {
    grip: Math.round(measurements.gripAvg * 1.05 * 10) / 10,
    jump: Math.round(measurements.jump * 1.03),
    dash: Math.round(measurements.dash * 0.97 * 100) / 100
  }

  return {
    scores,
    deviations,
    motorAge,
    motorAgeDiff,
    type,
    classLevel,
    weaknessClass,
    sportsAptitude,
    goals,
    developmentAdvice: developmentAdvice[grade]
  }
}

// å­¦å¹´è¡¨ç¤ºç”¨
export function getGradeDisplay(grade: string): string {
  return grade === 'k5' ? 'å¹´é•·' : `å°å­¦${grade}å¹´ç”Ÿ`
}
